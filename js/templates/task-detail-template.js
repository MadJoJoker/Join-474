/**
 * Generates the HTML markup for a task overlay.
 *
 * @param {Object} task - The task object containing all task data.
 * @param {string} taskId - The unique identifier for the task.
 * @param {Array<Object>} contacts - The list of contacts assigned or available.
 * @returns {string} HTML string representing the task overlay.
 */
export function getTaskOverlay(task, taskId, contacts) {
  return `
        <main class="content-overlay-task">
            <div class="taskCardField titleBar">
                <div class="taskType ${
                  task.type?.toLowerCase().replace(/\s/g, "-") ?? ""
                }" >
                    ${task.type ?? ""}
                </div>

            </div>
            <div class="taskCardField titleText">
                ${task.title ?? ""}
            </div>
            <div class="taskCardField description">
                ${task.description ?? ""}
            </div>
            <div class="taskCardField">
    <p>Due date:</p>
    <p>${task.deadline ? (() => {
        const parts = task.deadline.split('.'); // ['21', '07', '2025']

        if (parts.length === 3) {
            const isoFormattedDate = `${parts[2]}-${parts[1]}-${parts[0]}`; // "2025-07-21"

            const dateObj = new Date(isoFormattedDate);

            if (!isNaN(dateObj.getTime())) {

                return dateObj.toLocaleDateString('de-DE', {
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric'
                }).replace(/\./g, '/');
            }
        }
        return "";
    })() : ""}</p>
</div>
            <div class="taskCardField priority">
                <p>Priority:</p>
                <div class="priority-display ${
                  task.priority?.toLowerCase() ?? ""
                }">
                    <p>${
                      task.priority
                        ? task.priority.charAt(0).toUpperCase() +
                          task.priority.slice(1)
                        : ""
                    }</p>
                </div>
            </div>
            <section>
                <div class="taskCardField assigned">Assigned To:</div>
                <div class="entryList assigned-list"></div>
            </section>
            <section class="cardMenu">
                <button class="delete-task-btn" data-task-id="${taskId}">
                     <svg width="17" height="19" viewBox="0 0 17 19" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3.68213 18.3967C3.13213 18.3967 2.6613 18.2009 2.26963 17.8092C1.87796 17.4176 1.68213 16.9467 1.68213 16.3967V3.39673C1.3988 3.39673 1.1613 3.3009 0.969629 3.10923C0.777962 2.91756 0.682129 2.68006 0.682129 2.39673C0.682129 2.1134 0.777962 1.8759 0.969629 1.68423C1.1613 1.49256 1.3988 1.39673 1.68213 1.39673H5.68213C5.68213 1.1134 5.77796 0.875895 5.96963 0.684229C6.1613 0.492562 6.3988 0.396729 6.68213 0.396729H10.6821C10.9655 0.396729 11.203 0.492562 11.3946 0.684229C11.5863 0.875895 11.6821 1.1134 11.6821 1.39673H15.6821C15.9655 1.39673 16.203 1.49256 16.3946 1.68423C16.5863 1.8759 16.6821 2.1134 16.6821 2.39673C16.6821 2.68006 16.5863 2.91756 16.3946 3.10923C16.203 3.3009 15.9655 3.39673 15.6821 3.39673V16.3967C15.6821 16.9467 15.4863 17.4176 15.0946 17.8092C14.703 18.2009 14.2321 18.3967 13.6821 18.3967H3.68213ZM3.68213 3.39673V16.3967H13.6821V3.39673H3.68213ZM5.68213 13.3967C5.68213 13.6801 5.77796 13.9176 5.96963 14.1092C6.1613 14.3009 6.3988 14.3967 6.68213 14.3967C6.96546 14.3967 7.20296 14.3009 7.39463 14.1092C7.5863 13.9176 7.68213 13.6801 7.68213 13.3967V6.39673C7.68213 6.1134 7.5863 5.8759 7.39463 5.68423C7.20296 5.49256 6.96546 5.39673 6.68213 5.39673C6.3988 5.39673 6.1613 5.49256 5.96963 5.68423C5.77796 5.8759 5.68213 6.1134 5.68213 6.39673V13.3967ZM9.68213 13.3967C9.68213 13.6801 9.77796 13.9176 9.96963 14.1092C10.1613 14.3009 10.3988 14.3967 10.6821 14.3967C10.9655 14.3967 11.203 14.3009 11.3946 14.1092C11.5863 13.9176 11.6821 13.6801 11.6821 13.3967V6.39673C11.6821 6.1134 11.5863 5.8759 11.3946 5.68423C11.203 5.49256 10.9655 5.39673 10.6821 5.39673C10.3988 5.39673 10.1613 5.49256 9.96963 5.68423C9.77796 5.8759 9.68213 6.1134 9.68213 6.39673V13.3967Z" fill="#2A3647"/>
</svg>
<svg width="47" height="13" viewBox="0 0 47 13" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3.68213 11.8967H0.0912199V0.260365H3.84122C4.97001 0.260365 5.93592 0.493319 6.73895 0.959229C7.54198 1.42135 8.15751 2.08612 8.58554 2.95355C9.01357 3.81718 9.22758 4.85127 9.22758 6.05582C9.22758 7.26794 9.01167 8.3115 8.57986 9.1865C8.14804 10.0577 7.51925 10.7282 6.69349 11.1979C5.86774 11.6638 4.86395 11.8967 3.68213 11.8967ZM1.50031 10.6467H3.59122C4.55334 10.6467 5.35069 10.4611 5.98327 10.0899C6.61584 9.7187 7.08743 9.19029 7.39804 8.50468C7.70864 7.81908 7.86395 7.00279 7.86395 6.05582C7.86395 5.11643 7.71054 4.30771 7.40372 3.62968C7.0969 2.94786 6.63857 2.42514 6.02872 2.0615C5.41887 1.69408 4.6594 1.51036 3.75031 1.51036H1.50031V10.6467ZM15.0685 12.0785C14.2276 12.0785 13.5022 11.8929 12.8924 11.5217C12.2863 11.1467 11.8185 10.624 11.4889 9.95355C11.1632 9.2793 11.0003 8.49521 11.0003 7.60127C11.0003 6.70733 11.1632 5.91946 11.4889 5.23764C11.8185 4.55203 12.2768 4.01794 12.8639 3.63536C13.4549 3.249 14.1443 3.05582 14.9321 3.05582C15.3867 3.05582 15.8355 3.13158 16.2787 3.28309C16.7219 3.43461 17.1253 3.68082 17.4889 4.02173C17.8526 4.35885 18.1424 4.80582 18.3583 5.36264C18.5742 5.91946 18.6821 6.60506 18.6821 7.41946V7.98764H11.9549V6.82855H17.3185C17.3185 6.33612 17.22 5.89673 17.023 5.51036C16.8299 5.124 16.5533 4.81908 16.1935 4.59559C15.8374 4.37211 15.417 4.26036 14.9321 4.26036C14.398 4.26036 13.9359 4.39294 13.5458 4.65809C13.1594 4.91946 12.8621 5.26036 12.6537 5.68082C12.4454 6.10127 12.3412 6.55203 12.3412 7.03309V7.80582C12.3412 8.46491 12.4549 9.02362 12.6821 9.48196C12.9132 9.9365 13.2333 10.2831 13.6424 10.5217C14.0514 10.7566 14.5268 10.874 15.0685 10.874C15.4208 10.874 15.7389 10.8248 16.023 10.7263C16.3109 10.624 16.559 10.4725 16.7674 10.2717C16.9757 10.0672 17.1367 9.8134 17.2503 9.51036L18.5458 9.874C18.4094 10.3134 18.1802 10.6998 17.8583 11.0331C17.5363 11.3626 17.1386 11.6202 16.6651 11.8058C16.1916 11.9876 15.6594 12.0785 15.0685 12.0785ZM22.0628 0.260365V11.8967H20.7219V0.260365H22.0628ZM28.1779 12.0785C27.337 12.0785 26.6116 11.8929 26.0017 11.5217C25.3957 11.1467 24.9279 10.624 24.5983 9.95355C24.2726 9.2793 24.1097 8.49521 24.1097 7.60127C24.1097 6.70733 24.2726 5.91946 24.5983 5.23764C24.9279 4.55203 25.3862 4.01794 25.9733 3.63536C26.5642 3.249 27.2536 3.05582 28.0415 3.05582C28.496 3.05582 28.9449 3.13158 29.3881 3.28309C29.8313 3.43461 30.2347 3.68082 30.5983 4.02173C30.962 4.35885 31.2517 4.80582 31.4676 5.36264C31.6835 5.91946 31.7915 6.60506 31.7915 7.41946V7.98764H25.0642V6.82855H30.4279C30.4279 6.33612 30.3294 5.89673 30.1324 5.51036C29.9392 5.124 29.6627 4.81908 29.3029 4.59559C28.9468 4.37211 28.5264 4.26036 28.0415 4.26036C27.5074 4.26036 27.0453 4.39294 26.6551 4.65809C26.2688 4.91946 25.9714 5.26036 25.7631 5.68082C25.5548 6.10127 25.4506 6.55203 25.4506 7.03309V7.80582C25.4506 8.46491 25.5642 9.02362 25.7915 9.48196C26.0226 9.9365 26.3426 10.2831 26.7517 10.5217C27.1608 10.7566 27.6362 10.874 28.1779 10.874C28.5301 10.874 28.8483 10.8248 29.1324 10.7263C29.4203 10.624 29.6684 10.4725 29.8767 10.2717C30.0851 10.0672 30.246 9.8134 30.3597 9.51036L31.6551 9.874C31.5188 10.3134 31.2896 10.6998 30.9676 11.0331C30.6457 11.3626 30.2479 11.6202 29.7745 11.8058C29.301 11.9876 28.7688 12.0785 28.1779 12.0785ZM37.6267 3.16946V4.30582H33.104V3.16946H37.6267ZM34.4222 1.07855H35.7631V9.39673C35.7631 9.77552 35.818 10.0596 35.9279 10.249C36.0415 10.4346 36.1854 10.5596 36.3597 10.624C36.5377 10.6846 36.7252 10.7149 36.9222 10.7149C37.0699 10.7149 37.1911 10.7073 37.2858 10.6922C37.3805 10.6732 37.4563 10.6581 37.5131 10.6467L37.7858 11.8513C37.6949 11.8854 37.568 11.9195 37.4051 11.9535C37.2423 11.9914 37.0358 12.0104 36.7858 12.0104C36.407 12.0104 36.0358 11.9289 35.6722 11.766C35.3123 11.6032 35.0131 11.3551 34.7745 11.0217C34.5396 10.6884 34.4222 10.2679 34.4222 9.76036V1.07855ZM43.2091 12.0785C42.3682 12.0785 41.6428 11.8929 41.033 11.5217C40.4269 11.1467 39.9591 10.624 39.6296 9.95355C39.3038 9.2793 39.1409 8.49521 39.1409 7.60127C39.1409 6.70733 39.3038 5.91946 39.6296 5.23764C39.9591 4.55203 40.4175 4.01794 41.0046 3.63536C41.5955 3.249 42.2849 3.05582 43.0728 3.05582C43.5273 3.05582 43.9762 3.13158 44.4193 3.28309C44.8625 3.43461 45.2659 3.68082 45.6296 4.02173C45.9932 4.35885 46.283 4.80582 46.4989 5.36264C46.7148 5.91946 46.8228 6.60506 46.8228 7.41946V7.98764H40.0955V6.82855H45.4591C45.4591 6.33612 45.3606 5.89673 45.1637 5.51036C44.9705 5.124 44.694 4.81908 44.3341 4.59559C43.9781 4.37211 43.5576 4.26036 43.0728 4.26036C42.5387 4.26036 42.0765 4.39294 41.6864 4.65809C41.3 4.91946 41.0027 5.26036 40.7943 5.68082C40.586 6.10127 40.4818 6.55203 40.4818 7.03309V7.80582C40.4818 8.46491 40.5955 9.02362 40.8228 9.48196C41.0538 9.9365 41.3739 10.2831 41.783 10.5217C42.1921 10.7566 42.6675 10.874 43.2091 10.874C43.5614 10.874 43.8796 10.8248 44.1637 10.7263C44.4515 10.624 44.6996 10.4725 44.908 10.2717C45.1163 10.0672 45.2773 9.8134 45.3909 9.51036L46.6864 9.874C46.55 10.3134 46.3209 10.6998 45.9989 11.0331C45.6769 11.3626 45.2792 11.6202 44.8057 11.8058C44.3322 11.9876 43.8 12.0785 43.2091 12.0785Z" fill="#2A3647"/>
</svg>


                </button>
                <button class="edit-task-btn" data-task-id="${taskId}">
 <svg width="19" height="19" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2.68213 16.3967H4.08213L12.7071 7.77173L11.3071 6.37173L2.68213 14.9967V16.3967ZM16.9821 6.32173L12.7321 2.12173L14.1321 0.721729C14.5155 0.338395 14.9863 0.146729 15.5446 0.146729C16.103 0.146729 16.5738 0.338395 16.9571 0.721729L18.3571 2.12173C18.7405 2.50506 18.9405 2.96756 18.9571 3.50923C18.9738 4.0509 18.7905 4.5134 18.4071 4.89673L16.9821 6.32173ZM15.5321 7.79673L4.93213 18.3967H0.682129V14.1467L11.2821 3.54673L15.5321 7.79673Z" fill="#2A3647"/>
</svg>
<svg width="28" height="14" viewBox="0 0 28 14" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M0.0912199 12.8967V1.26036H7.11395V2.51036H1.50031V6.44218H6.75031V7.69218H1.50031V11.6467H7.20486V12.8967H0.0912199ZM12.7674 13.0785C12.0401 13.0785 11.398 12.8948 10.8412 12.5274C10.2844 12.1562 9.8488 11.6335 9.5344 10.9592C9.22001 10.2812 9.06281 9.48006 9.06281 8.55582C9.06281 7.63915 9.22001 6.8437 9.5344 6.16946C9.8488 5.49521 10.2863 4.97438 10.8469 4.60696C11.4075 4.23953 12.0552 4.05582 12.7901 4.05582C13.3583 4.05582 13.8071 4.15052 14.1367 4.33991C14.47 4.52552 14.7238 4.73764 14.898 4.97627C15.0761 5.21112 15.2143 5.4043 15.3128 5.55582H15.4264V1.26036H16.7674V12.8967H15.4719V11.5558H15.3128C15.2143 11.7149 15.0742 11.9157 14.8924 12.1581C14.7105 12.3967 14.4511 12.6107 14.1139 12.8001C13.7768 12.9857 13.328 13.0785 12.7674 13.0785ZM12.9492 11.874C13.4871 11.874 13.9416 11.7338 14.3128 11.4535C14.684 11.1695 14.9662 10.7774 15.1594 10.2774C15.3526 9.77362 15.4492 9.19218 15.4492 8.53309C15.4492 7.88158 15.3545 7.3115 15.1651 6.82286C14.9757 6.33044 14.6954 5.94786 14.3242 5.67514C13.953 5.39862 13.4946 5.26036 12.9492 5.26036C12.381 5.26036 11.9075 5.4062 11.5287 5.69786C11.1537 5.98574 10.8715 6.37779 10.6821 6.874C10.4965 7.36643 10.4037 7.91946 10.4037 8.53309C10.4037 9.1543 10.4984 9.7187 10.6878 10.2263C10.881 10.7301 11.1651 11.1316 11.5401 11.4308C11.9189 11.7263 12.3886 11.874 12.9492 11.874ZM19.4094 12.8967V4.16946H20.7503V12.8967H19.4094ZM20.0912 2.71491C19.8299 2.71491 19.6045 2.6259 19.4151 2.44786C19.2295 2.26983 19.1367 2.05582 19.1367 1.80582C19.1367 1.55582 19.2295 1.3418 19.4151 1.16377C19.6045 0.985744 19.8299 0.896729 20.0912 0.896729C20.3526 0.896729 20.5761 0.985744 20.7617 1.16377C20.9511 1.3418 21.0458 1.55582 21.0458 1.80582C21.0458 2.05582 20.9511 2.26983 20.7617 2.44786C20.5761 2.6259 20.3526 2.71491 20.0912 2.71491ZM27.0017 4.16946V5.30582H22.479V4.16946H27.0017ZM23.7972 2.07855H25.1381V10.3967C25.1381 10.7755 25.193 11.0596 25.3029 11.249C25.4165 11.4346 25.5604 11.5596 25.7347 11.624C25.9127 11.6846 26.1002 11.7149 26.2972 11.7149C26.4449 11.7149 26.5661 11.7073 26.6608 11.6922C26.7555 11.6732 26.8313 11.6581 26.8881 11.6467L27.1608 12.8513C27.0699 12.8854 26.943 12.9195 26.7801 12.9535C26.6173 12.9914 26.4108 13.0104 26.1608 13.0104C25.782 13.0104 25.4108 12.9289 25.0472 12.766C24.6873 12.6032 24.3881 12.3551 24.1495 12.0217C23.9146 11.6884 23.7972 11.2679 23.7972 10.7604V2.07855Z" fill="#2A3647"/>
</svg>


                </button>
            </section>
        </main>
    `;
}
